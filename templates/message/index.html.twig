{% extends 'base.html.twig' %}

{% block body %}
	<div class="container">
		<div
			class="message-header">
			{# naam van de andere player #}
			<h2>
				Player xxx
			</h2>
			<select name="friends" id="friends-select">
				<option value="">
					My friends
				</option>
				{% for friend in friends %}
					<option value="{{ path('message_index', { id: friend.id }) }}">
						{{ friend.username }}
					</option>
				{% endfor %}
			</select>
		</div>

		<div class"message-content">
			{% for message in conversation %}
				{% if message.sender.id != receiverId %}
					<p class="sender">
						{{message.content}}
					</p>
				{% endif %}
				{% if message.sender.id == receiverId %}
					<p class="receiver">
						{{message.content}}
					</p>
				{% endif %}
			{% endfor %}

		</div>
		<div class="message-new">
			{{ form_start(form) }}
			{{ form_row(form.content) }}
			<button type="submit">
				Verzenden
			</button>
			{{ form_end(form) }}
		</div>

	</div>
	<script>
		document.getElementById('friends-select').addEventListener('change', function () {
			let url = this.value;
			if (url) {
				window.location.href = url;
			}
		});
	</script>


{% endblock %}
